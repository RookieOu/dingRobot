<?xml version="1.0" encoding="UTF-8"?>
<Appenders>
    <Console name="console" target="SYSTEM_OUT">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
    </Console>
    <Sentry name="Sentry"/>
    <RollingRandomAccessFile name="biz" fileName="${log.home}/biz.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/biz.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}">
            <Delete basePath="${log.home}" maxDepth="2">
                <IfLastModified age="${file.duration}"/>
            </Delete>
        </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="access" fileName="${log.home}/all-access.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/all-access.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}"/>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="error" fileName="${log.home}/all-error.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/all-error.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Filters>
            <ThresholdFilter level="error" onMatch="ACCEPT" onMismatch="DENY"/>
        </Filters>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}"/>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="application" fileName="${log.home}/application.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/application.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}"/>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="gm" fileName="${log.home}/gm.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/gm.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}"/>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="sys" fileName="${log.home}/sys.log"
                             filePattern="${log.home}/%d{yyyy-MM-dd}/sys.%d{yyyy-MM-dd}.%i.log">
        <JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/>
        <Policies>
            <TimeBasedTriggeringPolicy modulate="true"/>
            <SizeBasedTriggeringPolicy size="${file.size}"/>
        </Policies>
        <DefaultRolloverStrategy max="${file.count}"/>
    </RollingRandomAccessFile>
</Appenders>